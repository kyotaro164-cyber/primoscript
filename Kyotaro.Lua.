-- Muscle Legends Server Hopper
-- Optimized for GitHub Loadstring

if not game:IsLoaded() then
    game.Loaded:Wait()
end

local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")
local PlaceId = game.PlaceId
local JobId = game.JobId

-- Notification para sa User
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "Server Hopper",
    Text = "Naghahanap ng bagong server...",
    Duration = 5
})

local function Teleport()
    local Success, Error = pcall(function()
        -- Kinukuha ang listahan ng servers na may kaunting players
        local Site = HttpService:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/" .. PlaceId .. "/servers/Public?sortOrder=Asc&limit=100"))
        
        for _, server in pairs(Site.data) do
            if server.playing < server.maxPlayers and server.id ~= JobId then
                TeleportService:TeleportToPlaceInstance(PlaceId, server.id, game.Players.LocalPlayer)
                return
            end
        end
    end)

    if not Success then
        warn("Teleport Error: " .. tostring(Error))
        -- Retry pagkatapos ng 5 seconds kung nag-fail
        task.wait(5)
        Teleport()
    end
end

Teleport()
